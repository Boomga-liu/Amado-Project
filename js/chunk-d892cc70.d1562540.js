(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d892cc70"],{"0f8b":function(t,a,e){"use strict";e("da6a")},"6f7c":function(t,a,e){"use strict";e.r(a);var c=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"px-3 py-150 cartcheckout-area"},[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("h2",{staticClass:"mb-4 text-center text-md-left"},[t._v("Shopping List")]),t.haveItem?e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-lg-8"},[e("table",{staticClass:"table table-responsive cartcheckout-custom"},[t._m(0),e("tbody",t._l(t.cartData,(function(a){return e("tr",{key:a.id},[e("td",[e("img",{staticClass:"img-fluid",attrs:{src:a.imageUrl,alt:"image"}})]),e("td",[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.goToItem(a.product_id)}}},[t._v(t._s(a.name))])]),e("td",[e("div",{staticClass:"cart-quantity"},[e("select",{directives:[{name:"model",rawName:"v-model",value:a.qty,expression:"item.qty"}],staticClass:"form-control form-control-sm",on:{change:[function(e){var c=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(a,"qty",e.target.multiple?c:c[0])},t.getSubtotal]}},t._l(10,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v(t._s(a))])})),0),e("span",{staticClass:"px-1 d-none d-xl-block"},[t._v("/ "+t._s(a.unit))])])]),e("td",{staticClass:"justify-content-end"},[t._v(t._s(t._f("currency")(a.price)))]),e("td",{staticClass:"justify-content-end"},[e("button",{staticClass:"trash-btn btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(e){return t.removeCartItem(a)}}},[e("i",{staticClass:"far fa-trash-alt"})])])])})),0)])]),e("div",{staticClass:"col-12 col-lg-4"},[e("div",{staticClass:"cart-summary"},[e("h5",{staticClass:"mb-4"},[t._v("Cart Total")]),e("ul",{staticClass:"list-unstyled"},[e("li",[e("span",[t._v("Subtotal:")]),e("span",[t._v(t._s(t._f("currency")(t.subtotal)))])]),e("li",{staticClass:"checkout-btn",on:{click:t.postCarts}},[e("a",{staticClass:"btn btn-primary btn-lg rounded-0 w-100"},[t._v("Confirm")])])])])])]):e("div",{staticClass:"row no-product"},[e("div",{staticClass:"col-12 col-lg-11"},[e("ul",{staticClass:"bg-light d-flex list-unstyled flex-column justify-content-center align-items-center py-5 mb-0"},[t._m(1),e("li",{staticClass:"no-product-text"},[t._v("Your Shopping List is emptyï¼")]),e("li",[e("router-link",{staticClass:"btn btn-primary",attrs:{to:"/shop/products"}},[t._v("Go Shopping")])],1)])])])],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th"),e("th",[t._v("Name")]),e("th",[t._v("Quantity")]),e("th",[t._v("Price")]),e("th")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("li",[e("i",{staticClass:"fas fa-4x fa-cart-arrow-down"})])}],s=(e("a434"),e("99af"),e("159b"),e("a9e3"),{data:function(){return{cartData:JSON.parse(localStorage.getItem("cartData"))||[],isLoading:!1,cartsLength:"",subtotal:0,total:0,index:0,cacheId:[],cacheData:[],cache:{}}},methods:{removeCartItem:function(t){this.index=this.cartData.indexOf(t),this.cartData.splice(this.index,1),localStorage.setItem("cartData",JSON.stringify(this.cartData)),this.getSubtotal(),this.$bus.$emit("localStorage:get"),this.$bus.$emit("message:push","Deleted","success")},postCarts:function(){var t=this;this.isLoading=!0,this.$http.get("".concat("https://vue-course-api.hexschool.io","/api/").concat("boomgaliu","/cart")).then((function(a){t.cacheData=a.data.data.carts,t.cacheData.forEach((function(a){t.cacheId.push(a.id)}))})).then((function(){t.cacheId.forEach((function(a){t.$http.delete("".concat("https://vue-course-api.hexschool.io","/api/").concat("boomgaliu","/cart/").concat(a))}))})).then((function(){t.cartData.forEach((function(a){t.cache={product_id:a.product_id,qty:a.qty},t.$http.post("".concat("https://vue-course-api.hexschool.io","/api/").concat("boomgaliu","/cart"),{data:t.cache}).then((function(a){a.data.success&&(t.cartData=[],t.cacheId=[],t.cacheData=[],t.cache={},localStorage.removeItem("cartData"),t.$bus.$emit("localStorage:get"),t.$router.push("/shop/cart").catch((function(){}))),t.isLoading=!1}))}))}))},goToItem:function(t){this.$router.push("product_detail/".concat(t))},getSubtotal:function(){var t=this;this.cartData.length>1?(this.subtotal=0,this.cartData.forEach((function(a){t.subtotal+=Number(a.price*a.qty)}))):1===this.cartData.length?this.cartData.forEach((function(a){t.subtotal=Number(a.price*a.qty)})):this.subtotal=0}},computed:{haveItem:function(){return 0!==this.cartData.length}},created:function(){this.$bus.$emit("menu:active","CART"),this.getSubtotal()}}),n=s,o=(e("0f8b"),e("2877")),r=Object(o["a"])(n,c,i,!1,null,null,null);a["default"]=r.exports},8418:function(t,a,e){"use strict";var c=e("c04e"),i=e("9bf2"),s=e("5c6c");t.exports=function(t,a,e){var n=c(a);n in t?i.f(t,n,s(0,e)):t[n]=e}},"99af":function(t,a,e){"use strict";var c=e("23e7"),i=e("d039"),s=e("e8b5"),n=e("861d"),o=e("7b0b"),r=e("50c4"),l=e("8418"),u=e("65f0"),h=e("1dde"),d=e("b622"),f=e("2d00"),p=d("isConcatSpreadable"),m=9007199254740991,v="Maximum allowed index exceeded",g=f>=51||!i((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),b=h("concat"),_=function(t){if(!n(t))return!1;var a=t[p];return void 0!==a?!!a:s(t)},y=!g||!b;c({target:"Array",proto:!0,forced:y},{concat:function(t){var a,e,c,i,s,n=o(this),h=u(n,0),d=0;for(a=-1,c=arguments.length;a<c;a++)if(s=-1===a?n:arguments[a],_(s)){if(i=r(s.length),d+i>m)throw TypeError(v);for(e=0;e<i;e++,d++)e in s&&l(h,d,s[e])}else{if(d>=m)throw TypeError(v);l(h,d++,s)}return h.length=d,h}})},a434:function(t,a,e){"use strict";var c=e("23e7"),i=e("23cb"),s=e("a691"),n=e("50c4"),o=e("7b0b"),r=e("65f0"),l=e("8418"),u=e("1dde"),h=u("splice"),d=Math.max,f=Math.min,p=9007199254740991,m="Maximum allowed length exceeded";c({target:"Array",proto:!0,forced:!h},{splice:function(t,a){var e,c,u,h,v,g,b=o(this),_=n(b.length),y=i(t,_),C=arguments.length;if(0===C?e=c=0:1===C?(e=0,c=_-y):(e=C-2,c=f(d(s(a),0),_-y)),_+e-c>p)throw TypeError(m);for(u=r(b,c),h=0;h<c;h++)v=y+h,v in b&&l(u,h,b[v]);if(u.length=c,e<c){for(h=y;h<_-c;h++)v=h+c,g=h+e,v in b?b[g]=b[v]:delete b[g];for(h=_;h>_-c+e;h--)delete b[h-1]}else if(e>c)for(h=_-c;h>y;h--)v=h+c-1,g=h+e-1,v in b?b[g]=b[v]:delete b[g];for(h=0;h<e;h++)b[h+y]=arguments[h+2];return b.length=_-c+e,u}})},da6a:function(t,a,e){}}]);
//# sourceMappingURL=chunk-d892cc70.d1562540.js.map